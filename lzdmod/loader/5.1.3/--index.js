"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();!function(){function e(e){window.requestNextAnimationFrame=function(){var e=undefined,t=undefined,n=(undefined,navigator.userAgent),o=0,r=this;return window.webkitRequestAnimationFrame&&(t=function(e){e===undefined&&(e=+new Date),r.callback(e)},e=window.webkitRequestAnimationFrame,window.webkitRequestAnimationFrame=function(n,o){r.callback=n,e(t,o)}),window.mozRequestAnimationFrame&&(o=n.indexOf("rv:"),-1!=n.indexOf("Gecko")&&"2.0"===n.substr(o+3,3)&&(window.mozRequestAnimationFrame=undefined)),window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){var n=void 0,o=void 0;window.setTimeout(function(){n=+new Date,e(n),o=+new Date,r.timeout=1e3/60-(o-n)},r.timeout)}}(),window.requestNextAnimationFrame(e)}function t(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent&&e.attachEvent("on"+t,n)}function n(e,t,n){e.removeEventListener?e.removeEventListener(t,n):e.detachEvent&&e.detachEvent("on"+t,n)}function o(e){function t(e){function t(){n||(e(),n=!0)}var n=!1,o=document;if(o.addEventListener)o.addEventListener("DOMContentLoaded",t,!1);else if(o.attachEvent){var r=!1;try{r=null!==window.frameElement}catch(i){}o.documentElement.doScroll&&!r&&function e(){if(!n)try{o.documentElement.doScroll("left"),t()}catch(i){setTimeout(e,10)}}(),o.attachEvent("onreadystatechange",function(){"complete"===o.readyState&&t()})}}e&&!e.ready&&(e.ready=t)}function r(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"}function i(e){return[].slice.call(e)}function a(e,t){var n=e.getBoundingClientRect();return!(!n.width&&!n.height||n.top-window.innerHeight>=t||n.bottom+t<=0||n.right<=0||n.left-window.innerWidth>=0)}function d(e){var t=void 0;return t=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,"none"===t.display||"0px"===t.height&&"0px"===t.width}function u(e){if(!e||!e.length)return console&&console.error("targets is invaild...");if(e&&1===e.length)return e[0].mods;var t=void 0;e.map(function(e){"sort"===e.type&&(t=e)}),t||(t=e[0]);var n=e.indexOf(t);e.splice(n,1);for(var o=t.mods.slice(),r=function(t){var n=o[t],r=!1;e.map(function(e){e.mods.map(function(e){n.moduleId===e.moduleId&&(r=!0)})}),r||o.splice(t,1)},i=o.length-1;i>=0;i--)r(i);return o}function c(){return location.href.indexOf("wh_debugloader")>0&&location.href.indexOf("?")>0}function l(){var e=navigator.userAgent.toLowerCase().match(/msie ([\d.]+)/),t=!1;return e&&e[1]&&("6.0"==e[1]||"7.0"==e[1])&&(t=!0),t}function s(){var e=void 0;try{var t=document.getElementById("J_floorSortCfg").value;e=JSON.parse(t)}catch(n){e={"enable":!1}}return e}function f(){var e=void 0;try{var t=document.getElementById("J_modsAreaCfg").value;e=JSON.parse(t)}catch(n){e={"enable":!1}}return e}function m(e){return((window.$zebra||{}).components||[]).filter(function(t){return t.moduleId===e})[0]||{}}function v(){var e=void 0;try{var t=document.getElementById("J_modsJuCubeCfg").value;e=JSON.parse(t)}catch(n){e={"enable":!1}}return e}function v(){var e=void 0;try{var t=document.getElementById("J_modsJuCubeCfg").value;e=JSON.parse(t)}catch(n){e={"enable":!1}}return e}function w(){var e=void 0;try{var t=document.getElementById("J_modsJupSortCfg").value;e=JSON.parse(t)}catch(n){e={"enable":!1}}return e}function g(e,t){e=e||[],t=t||{},window.$zebra=window.$zebra||{},q("rax",function(n){var o=n.createElement;(0,n.render)(o(e,{"data":t.data||{},"theme":t.theme||{},"config":t.config||{},"pageConfig":$zebra.pageConfig||{},"systemConfig":$zebra.systemConfig||{}}),t.el)})}function y(e,t){for(var n=e,o=[],r=0,i=n.length;r<i;r++)o.push(n[r].mod);B(o,function(){for(var e=Array.prototype.slice.call(arguments),t=void 0,o=void 0,r=0,i=e.length;r<i;r++)if(t=e[r],o=n[r],z.isTypeOf("Function",t)&&!o.isRax)if(z.isDebug())t(o.el,o.cfg,o);else try{t(o.el,o.cfg,o)}catch(a){console&&console.error(a)}else O(t,o)},function(e){h(n,t)})}function h(e,t){for(var n=function(t,n){var o=e[t];B(o.mod,function(e){z.getModuleMetaInfoById(o.moduleId);if(z.isTypeOf("Function",e))try{e(o.el,o.cfg,o)}catch(t){console.error&&console.error(t)}else z.isTypeOf("Object",e)&&moduleInfo.isRax&&O(e,o)},function(e){p(o.mod+" components can not found or require target lost, hide this dom",e),o.el&&(o.el.style.display="none")})},o=0,r=e.length;o<r;o++)n(o,r)}function p(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};e="string"==typeof e?e:"components can not found and loder failed",console&&console.error(e,t);var n=t.error?t.error.exception:"";window.__bl&&__bl.error&&__bl.error("[load module error]: "+e+";details:"+n)}function b(e,t){e=e||[],t=t||{},y(e,t)}function E(e,t){var n=0;if(!R){R=!0;for(var o=0,r=e.length;o<r;o++)n=r-o-1,J.isInViewport(e[n].el,$)&&(T.push(e[n]),e.splice(n,1),A(t));R=!1,e.length||L.removeEvent(window,"scroll",E)}}function A(e){for(var t=void 0;t=T.shift();)!function(e){function t(t){J.getModuleMetaInfoById(e.moduleId);if(J.isTypeOf("Function",t)&&!moduleInfo.isRax)try{t(e.el,e.cfg,e)}catch(n){console.error&&console.error(n)}else _(t,e)}function n(e){}F(function(){setTimeout(function(){N(e.mod,t,n)},15)})}(t)}function I(e,t){function n(){if(!modBukets.async.length)return o&&clearTimeout(o),r&&clearInterval(r),void L.removeEvent(window,"scroll",n);E(t),o&&clearTimeout(o),r&&clearInterval(r),r=setInterval(function(){E(t)},300),o=setTimeout(function(){r&&clearInterval(r)},3e3)}var o=null,r=null;e=e||[],t=t||{},window.CustomEvent&&window.dispatchEvent?(window.$zebraLoader||(window.$zebraLoader={}),window.$zebraLoader.trigger=function(e){var t=new CustomEvent(e);window.dispatchEvent(t)}):console.warn("not support CustomEvent yet"),L.bindEvent(window,"zebraLoader.async",function(){E(t)}),E(t),L.bindEvent(window,"load",function(){E(t)}),L.bindEvent(window,"scroll",n)}function x(e){e&&e.sync&&e.async&&("async"==D.loadType?I(e.sync):(e.sync=e.sync.concat(e.async),e.async=[],b(e.sync)))}function C(){(new V).bootstrap()}var S={"bindEvent":t,"removeEvent":n},k={"isTypeOf":r,"toArray":i,"isInViewport":a,"isHiddenMod":d,"isDebug":c,"isLteIE7":l,"modIntersection":u,"parseRecommend":s,"parseAreaCfg":f,"getModuleMetaInfoById":m,"parseJuCubeCfg":v,"parseJupSortCfg":w},q=window.require,M={"raf":e,"event":S,"raxLoad":g,"tools":k,"ready":o},z=M.tools,O=M.raxLoad,B=window.require,F=M.raf,L=M.event,J=M.tools,_=M.raxLoad,R=!1,T=[],$=window.$zebra&&window.$zebra.diff||50,N=window.require,D=window.$zebra||{},W=window.document,j=M.tools,V=function(){function e(t){_classCallCheck(this,e),this.ctx={},this.ctx.diff=t||50,this.ctx.modBuckets={"async":[],"sync":[],"raxMods":[],"ignore":[]},this.init()}return _createClass(e,[{"key":"init","value":function(){var e=this.ctx;e.loaderMod=x,e.usedList=[],e.loader=feloader||KISSY}},{"key":"getWrapperFrom","value":function(e){if(e.getAttribute("data-module-id"))return e;for(var t=e.parentElement;t&&!t.getAttribute("data-module-id");)t=t.parentElement;return t}},{"key":"getBoxFrom","value":function(e){for(var t=e.firstElementChild;t&&!t.getAttribute("data-mod-name");)t=t.firstElementChild;return t}},{"key":"queryAllModWrappers","value":function(){var e=this.ctx,t=void 0,n=[],o=!1,r=0,i=void 0;if(W.querySelectorAll)n=W.querySelectorAll(".mui-zebra-module[data-module-id]"),t=W.querySelectorAll('div[class="mui-zebra-page"]')[0];else for(var a=W.getElementsByTagName("*"),d=0,u=a.length;d<u;d++){var c=a[d];c&&(c.getAttribute("class")||"").indexOf("mui-zebra-module")>-1&&c.getAttribute("data-module-id")?n.push(c):c&&(c.getAttribute("class")||"").indexOf("mui-zebra-page")>-1&&(t=c)}n=j.toArray(n);for(var l=0,s=n.length;l<s;l++){o=n[l].parentElement===t,o&&i===undefined&&(i=l),o&&r++}e.firstPureModuleIndex=i,e.pureModuleCount=r,e.modContainer=t}},{"key":"queryAllInitMods","value":function(){var e=this.ctx,t=[];if(W.querySelectorAll)t=W.querySelectorAll("[data-mod-name]");else for(var n=W.getElementsByTagName("*"),o=0,r=n.length;o<r;o++){var i=n[o];i&&i.getAttribute("data-mod-name")&&t.push(i)}e.zebraModules=t}},{"key":"bucketingMods","value":function(){function e(e){d=e.getAttribute("data-mod-name"),u="true"==e.getAttribute("data-rax");var t=c.getWrapperFrom(e),n=t&&t.getAttribute("data-module-id"),l=j.getModuleMetaInfoById(n);if(d){if(i=e.getAttribute("data-zebra-load")||e.getAttribute("data-async-load"),a={"mod":d,"el":e,"moduleId":n||"","cfg":e.getAttribute("data-config"),"data":c.getData(e)||{},"config":l.config||{},"theme":l.meta||{},"isRax":u},!i||j.isHiddenMod(e))return void o.sync.push(a);"ignore"===i?o.ignore.push(a):"true"===i||"async"===i||!j.isInViewport(e,r)&&"sync"!==i&&"false"!==i?o.async.push(a):("sync"===i||j.isInViewport(e,r))&&o.sync.push(a)}}for(var t=this.ctx,n=t.zebraModules,o=t.modBuckets,r=t.diff,i=void 0,a=void 0,d=void 0,u=void 0,c=this,l=0,s=n.length;l<s;l++)e(n[l]);this.lodeScript()}},{"key":"getData","value":function(e){var t=e.getElementsByClassName("rax-comp-data")[0];return t=t&&t.value?JSON.parse(t.value):{}}},{"key":"lodeScript","value":function(){var e=this.ctx,t=e.loaderMod,n=e.modBuckets;j.isDebug()&&console&&console.info(this.ctx),t(n)}},{"key":"bootstrap","value":function(){var e=this.ctx;e.loader;this.queryAllModWrappers(),this.queryAllInitMods(),this.bucketingMods()}}]),e}(),H=(window.$zebra,window.feloader||window.KISSY);M.ready(H),H.ready(C)}();ute("data-async-load"),a={"mod":d,"el":e,"moduleId":n||"","cfg":e.getAttribute("data-config"),"data":c.getData(e)||{},"config":l.config||{},"theme":l.meta||{},"isRax":u},!i||j.isHiddenMod(e))return void o.sync.push(a);"ignore"===i?o.ignore.push(a):"true"===i||"async"===i||!j.isInViewport(e,r)&&"sync"!==i&&"false"!==i?o.async.push(a):("sync"===i||j.isInViewport(e,r))&&o.sync.push(a)}}for(var t=this.ctx,n=t.zebraModules,o=t.modBuckets,r=t.diff,i=void 0,a=void 0,d=void 0,u=void 0,c=this,l=0,s=n.length;l<s;l++)e(n[l]);this.lodeScript()}},{"key":"getData","value":function(e){var t=e.getElementsByClassName("rax-comp-data")[0];return t=t&&t.value?JSON.parse(t.value):{}}},{"key":"lodeScript","value":function(){var e=this.ctx,t=e.loaderMod,n=e.modBuckets;j.isDebug()&&console&&console.info(this.ctx),t(n)}},{"key":"bootstrap","value":function(){var e=this.ctx;e.loader;this.queryAllModWrappers(),this.queryAllInitMods(),this.bucketingMods()}}]),e}(),H=(window.$zebra,window.feloader||window.KISSY);M.ready(H),H.ready(C)}();ute("data-async-load"),a={"mod":d,"el":e,"moduleId":n||"","cfg":e.getAttribute("data-config"),"data":c.getData(e)||{},"config":l.config||{},"theme":l.meta||{},"isRax":u},!i||j.isHiddenMod(e))return void o.sync.push(a);"ignore"===i?o.ignore.push(a):"true"===i||"async"===i||!j.isInViewport(e,r)&&"sync"!==i&&"false"!==i?o.async.push(a):("sync"===i||j.isInViewport(e,r))&&o.sync.push(a)}}for(var t=this.ctx,n=t.zebraModules,o=t.modBuckets,r=t.diff,i=void 0,a=void 0,d=void 0,u=void 0,c=this,l=0,s=n.length;l<s;l++)e(n[l]);this.lodeScript()}},{"key":"getData","value":function(e){var t=e.getElementsByClassName("rax-comp-data")[0];return t=t&&t.value?JSON.parse(t.value):{}}},{"key":"lodeScript","value":function(){var e=this.ctx,t=e.lo